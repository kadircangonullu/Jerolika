function addFriendOptions(bUid,bUname){document.getElementById('sysmess').style.height='auto';document.getElementById('sysmess').style.visibility='visible';document.getElementById('sysmess').innerHTML=bUname+" arkadasin olmak istiyor! ";document.getElementById('sysmess').innerHTML+="<span style='cursor:pointer' onClick=\"toggleBox('sysmess');addFriend('"+bUid+"','"+bUname+"','addfriend')\">Kabul et</span> | ";document.getElementById('sysmess').innerHTML+="<span style='cursor:pointer' onClick=\"toggleBox('sysmess');addFriend('"+bUid+"','"+bUname+"','ignfriend')\">Reddet</span>";moveAvatar='0';}
function accFriendReq(bUid,bUname){document.getElementById('sysmess').style.visibility='visible';document.getElementById('sysmess').innerHTML=bUname+" arkadaslarina eklendi";sesstimeoutID=window.clearTimeout(mytimeoutID);;sesstimeoutID=window.setTimeout('hideSysMess()',5000);addFriend(bUid,bUname,'accfriend');moveAvatar='0';}
var addFriendReq=getXmlHttpRequestObject();function addFriend(bUid,bUname,bAction){var param='?';param+='&uref='+ chatRef;param+='&uname='+ chatName;param+='&uid='+ chatID;param+='&uadd_uname='+ bUname;param+='&uadd_uid='+ bUid;param+='&uaction='+ bAction;param+='&uroom='+ room;param+='&umessage=';param+='&uXX='+ dest_x;param+='&uYY='+ dest_y;if(addFriendReq.readyState==4||addFriendReq.readyState==0){addFriendReq.open("POST",'includes/sendData.php',true);addFriendReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded');addFriendReq.onreadystatechange=handleSendFriends;addFriendReq.send(param);}}
function handleSendFriends(){clearInterval(mTimer);showFriends();}
var searchFriendsID='0';var showFriendReq=getXmlHttpRequestObject();function showFriends(){if(showFriendReq.readyState==4||showFriendReq.readyState==0){showFriendReq.open("GET",'includes/friends.php?searchFriendsID='+searchFriendsID,true);showFriendReq.onreadystatechange=handleshowFriends;showFriendReq.send(null);}
document.getElementById('myfriends').innerHTML="";}
var f_users=0;function handleshowFriends(){if(showFriendReq.readyState==4){var xmldoc=showFriendReq.responseXML;var allUsers_nodes=xmldoc.getElementsByTagName("getfriends");f_users=allUsers_nodes.length;if(Number(f_users)==0){searchFriendsID=Number(searchFriendsID)- 10;if(Number(searchFriendsID)<0){searchFriendsID='0';}}
for(i=0;i<f_users;i++){var fID_node=allUsers_nodes[i].getElementsByTagName("fid");var fName_node=allUsers_nodes[i].getElementsByTagName("fname");var fRoom_node=allUsers_nodes[i].getElementsByTagName("froom");var fOnline_node=allUsers_nodes[i].getElementsByTagName("fonline");var fRoomname_node=allUsers_nodes[i].getElementsByTagName("froomname");showAllFriends(fID_node[0].firstChild.nodeValue,fName_node[0].firstChild.nodeValue,fRoom_node[0].firstChild.nodeValue,fOnline_node[0].firstChild.nodeValue,fRoomname_node[0].firstChild.nodeValue);}}}
function searchFriendsPrev(){if(Number(searchFriendsID)<0){searchFriendsID=0;}
if(Number(searchFriendsID)>0){searchFriendsID=Number(searchFriendsID)-10;showFriends();}}
function searchFriendsNext(){searchFriendsID=Number(searchFriendsID)+10;showFriends();}
var showFriendsIDNav='0';function showAllFriends(fID,fName,fRoom,fOnline,fRoomname){if(!document.getElementById("friends_nav")){var ni=document.getElementById('myfriends');var newdiv=document.createElement('div');newdiv.setAttribute("id","friends_nav");newdiv.className='';newdiv.innerHTML="<div style='padding: 2px;'>";if(f_users!=0&&searchFriendsID!=0){newdiv.innerHTML+="<a href='javascript:void(0);' onClick='searchFriendsPrev();'><img border='0' src='images/back.png' alt='Last' title='Last'></a>&nbsp;";}
if(f_users>=10){newdiv.innerHTML+="<a href='javascript:void(0);' OnClick='searchFriendsNext();'><img border='0' src='images/forward.png' alt='Next' title='Next'></a>";}
newdiv.innerHTML+="</div>";ni.appendChild(newdiv);}
if(!document.getElementById("friends_"+fID)){var ni=document.getElementById('myfriends');var newdiv=document.createElement('div');newdiv.setAttribute("id","friends_"+fID);newdiv.className='';if(chatProfileID=='0'){var userProfileUrl=chatProfileUrl+fName;}else{var userProfileUrl=chatProfileUrl+fID.replace(/_/gi,"");}
if(fOnline=='1'){if(chatMemberLevel==1){newdiv.innerHTML="&nbsp;"+fName+"<br>&nbsp;"+fRoomname+"<br><img id='onlineStatusIMG_"+fID+"' style='vertical-align:middle;' src='images/user.png' title='Online' alt='Online'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/home.png' onclick=\"loadRoom('"+fRoom+"');\" title='Join User' alt='Join User'>&nbsp;<img id='pchat' onClick=\"doWhisper('"+fName+"')\" style='cursor:pointer;vertical-align:middle;padding-top:4px;' src='images/private_chat.png' title='Private Chat' alt='Private Chat'>&nbsp;<img onClick=\"window.open('"+userProfileUrl+"','"+fID+"')\" style='cursor:pointer;vertical-align:middle;cursor:pointer;' src=images/zoom.png  title='View Profile' alt='View Profile'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/sendmail.png' onClick=\"replyM('"+fName+"','');toggleBox('myfriends');\" title='Send Message' alt='Send Message'>&nbsp;<img style='vertical-align:middle;cursor:pointer' src='images/bin.png' onClick=\"deleteFriend('"+fID+"','"+fName+"')\" title='Remove' alt='Remove'><br><br><hr>";}else{newdiv.innerHTML="&nbsp;"+fName+"<br>&nbsp;"+fRoomname+"<br><img id='onlineStatusIMG_"+fID+"' style='vertical-align:middle;' src='images/user.png' title='Online' alt='Online'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/home.png' onclick=\"loadRoom('"+fRoom+"');\" title='Join User' alt='Join User'>&nbsp;<img id='pchat' onClick=\"grayOut(true);showVIP();\" style='cursor:pointer;vertical-align:middle;padding-top:4px;' src='images/private_chat.png' title='Private Chat' alt='Private Chat'>&nbsp;<img onClick=\"window.open('"+userProfileUrl+"','"+fID+"')\" style='cursor:pointer;vertical-align:middle;cursor:pointer;' src=images/zoom.png  title='View Profile' alt='View Profile'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/sendmail.png' onClick=\"grayOut(true);showVIP();\" title='Send Message' alt='Send Message'>&nbsp;<img style='vertical-align:middle;cursor:pointer' src='images/bin.png' onClick=\"deleteFriend('"+fID+"','"+fName+"')\" title='Remove' alt='Remove'><br><br><hr>";}}else{if(chatMemberLevel==1){newdiv.innerHTML="&nbsp;"+fName+"<br>&nbsp;"+fRoomname+"<br><img id='onlineStatusIMG_"+fID+"' style='vertical-align:middle;' src='images/offline.png' title='Offline' alt='Offline'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/home.png' onclick=\"loadRoom('"+fRoom+"');\" title='Join User' alt='Join User'>&nbsp;<img id='pchat' onClick=\"alert('User Is Offline');\" style='cursor:pointer;vertical-align:middle;padding-top:4px;' src='images/private_chat.png' title='Private Chat' alt='Private Chat'>&nbsp;<img onClick=\"window.open('"+userProfileUrl+"','"+fID+"')\" style='cursor:pointer;vertical-align:middle;cursor:pointer;' src=images/zoom.png  title='View Profile' alt='View Profile'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/sendmail.png' onClick=\"replyM('"+fName+"','');toggleBox('myfriends');\" title='Send Message' alt='Send Message'>&nbsp;<img style='vertical-align:middle;cursor:pointer' src='images/bin.png' onClick=\"deleteFriend('"+fID+"','"+fName+"')\" title='Remove' alt='Remove'><br><br><hr>";}else{newdiv.innerHTML="&nbsp;"+fName+"<br>&nbsp;"+fRoomname+"<br><img id='onlineStatusIMG_"+fID+"' style='vertical-align:middle;' src='images/offline.png' title='Offline' alt='Offline'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/home.png' onclick=\"loadRoom('"+fRoom+"');\" title='Join User' alt='Join User'>&nbsp;<img id='pchat' onClick=\"alert('User Is Offline');\" style='cursor:pointer;vertical-align:middle;padding-top:4px;' src='images/private_chat.png' title='Private Chat' alt='Private Chat'>&nbsp;<img onClick=\"window.open('"+userProfileUrl+"','"+fID+"')\" style='cursor:pointer;vertical-align:middle;cursor:pointer;' src=images/zoom.png  title='View Profile' alt='View Profile'>&nbsp;<img style='vertical-align:middle;cursor:pointer;' src='images/sendmail.png' onClick=\"grayOut(true);showVIP();\" title='Send Message' alt='Send Message'>&nbsp;<img style='vertical-align:middle;cursor:pointer' src='images/bin.png' onClick=\"deleteFriend('"+fID+"','"+fName+"')\" title='Remove' alt='Remove'><br><br><hr>";}}
ni.appendChild(newdiv);}}
var delFriendReq=getXmlHttpRequestObject();function deleteFriend(ubUid,ubUname){document.getElementById('sysmess').style.visibility='visible';document.getElementById('sysmess').innerHTML="Artik "+ubUname+" ile arkadas degilsin<br>";var param='?';param+='&uref='+ chatRef;param+='&uname='+ chatName;param+='&uid='+ chatID;param+='&uremfriendID='+ ubUid;param+='&uaction=delfriend';param+='&uroom='+ room;param+='&umessage=';param+='&uXX='+ dest_x;param+='&uYY='+ dest_y;if(delFriendReq.readyState==4||delFriendReq.readyState==0){delFriendReq.open("POST",'includes/sendData.php',true);delFriendReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded');delFriendReq.onreadystatechange=handleSendDeleteFriends;delFriendReq.send(param);}
if(document.getElementById("friends_"+ubUid)){var d=document.getElementById('myfriends');var olddiv=document.getElementById("friends_"+ubUid);d.removeChild(olddiv);}}
function handleSendDeleteFriends(){clearInterval(mTimer);}
var sesstimeoutID;var reqFriendReq=getXmlHttpRequestObject();function reqFriend(ubUid,ubUname){document.getElementById('sysmess').style.visibility='visible';document.getElementById('sysmess').innerHTML="Arkadaslik istegi "+ubUname+" oyuncusuna gonderildi<br>";moveAvatar='0';sesstimeoutID=window.clearTimeout(mytimeoutID);;sesstimeoutID=window.setTimeout('hideSysMess()',5000);var param='?';param+='&uref='+ chatRef;param+='&uname='+ chatName;param+='&uid='+ chatID;param+='&ureqfriendID='+ ubUid;param+='&to_uname='+ ubUname;param+='&uaction=reqfriend';param+='&uroom='+ room;param+='&umessage=';param+='&uXX='+ dest_x;param+='&uYY='+ dest_y;if(reqFriendReq.readyState==4||reqFriendReq.readyState==0){reqFriendReq.open("POST",'includes/sendData.php',true);reqFriendReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded');reqFriendReq.onreadystatechange=handleSendReqFriends;reqFriendReq.send(param);}}
function handleSendReqFriends(){clearInterval(mTimer);}
function checkRoomStatus(){if(roomFull=='1'){document.getElementById('sysmess').style.visibility='visible';document.getElementById('sysmess').innerHTML="Mekan tamamen dolu!";sesstimeoutID=window.clearTimeout(mytimeoutID);;sesstimeoutID=window.setTimeout('hideSysMess()',5000);}
if(roomFriends=='1'){document.getElementById('sysmess').style.visibility='visible';document.getElementById('sysmess').innerHTML="Mekana sahibiyle arkadas olmaniz gerekiyor!";sesstimeoutID=window.clearTimeout(mytimeoutID);;sesstimeoutID=window.setTimeout('hideSysMess()',5000);}}